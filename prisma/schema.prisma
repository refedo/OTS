generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model SystemVersion {
  id            String   @id @default(cuid())
  version       String
  deployedAt    DateTime @default(now())
  deployedBy    String?
  gitCommit     String?
  migrationName String?
  notes         String?  @db.Text
  environment   String   @default("production")
  status        String   @default("success")

  @@index([deployedAt])
  @@index([version])
  @@map("system_versions")
}

model StrategicFoundation {
  id               String   @id @default(uuid()) @db.Char(36)
  vision           String   @db.Text
  mission          String   @db.Text
  coreValues       Json
  bhag             String?  @db.Text
  threeYearOutlook String?  @db.Text
  strategicPillars Json?
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@map("strategic_foundation")
}

model SwotAnalysis {
  id            String   @id @default(uuid()) @db.Char(36)
  year          Int
  strengths     Json
  weaknesses    Json
  opportunities Json
  threats       Json
  strategies    Json?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  @@index([year])
  @@map("swot_analysis")
}

model AnnualPlan {
  id                  String           @id @default(uuid()) @db.Char(36)
  year                Int              @unique
  theme               String
  strategicPriorities Json?
  status              String           @default("Draft")
  createdAt           DateTime         @default(now())
  updatedAt           DateTime         @updatedAt
  departmentPlans     DepartmentPlan[]

  @@index([year])
  @@index([status])
  @@map("annual_plans")
}

model CompanyObjective {
  id                   String                 @id @default(uuid()) @db.Char(36)
  title                String
  description          String?                @db.Text
  category             String
  ownerId              String                 @db.Char(36)
  tags                 Json?
  priority             String                 @default("Medium")
  status               String                 @default("Not Started")
  progress             Float                  @default(0)
  createdAt            DateTime               @default(now())
  updatedAt            DateTime               @updatedAt
  year                 Int
  quarterlyActions     Json?
  initiatives          AnnualInitiative[]
  kpis                 BalancedScorecardKPI[]
  owner                user                   @relation("ObjectiveOwner", fields: [ownerId], references: [id])
  departmentObjectives DepartmentObjective[]
  keyResults           KeyResult[]

  @@index([year])
  @@index([ownerId])
  @@index([category])
  @@index([status])
  @@map("company_objectives")
}

model KeyResult {
  id              String              @id @default(uuid()) @db.Char(36)
  objectiveId     String              @db.Char(36)
  title           String
  description     String?             @db.Text
  targetValue     Float
  currentValue    Float               @default(0)
  unit            String
  measurementType String              @default("Numeric")
  status          String              @default("Not Started")
  dueDate         DateTime?
  createdAt       DateTime            @default(now())
  updatedAt       DateTime            @updatedAt
  progressUpdates KeyResultProgress[]
  objective       CompanyObjective    @relation(fields: [objectiveId], references: [id], onDelete: Cascade)

  @@index([objectiveId])
  @@index([status])
  @@map("key_results")
}

model KeyResultProgress {
  id             String    @id @default(uuid()) @db.Char(36)
  keyResultId    String    @db.Char(36)
  value          Float
  notes          String?   @db.Text
  recordedBy     String    @db.Char(36)
  recordedDate   DateTime  @default(now())
  keyResult      KeyResult @relation(fields: [keyResultId], references: [id], onDelete: Cascade)
  recordedByUser user      @relation("KeyResultProgressRecorder", fields: [recordedBy], references: [id])

  @@index([keyResultId])
  @@index([recordedDate])
  @@index([recordedBy], map: "key_result_progress_recordedBy_fkey")
  @@map("key_result_progress")
}

model BalancedScorecardKPI {
  id             String              @id @default(uuid()) @db.Char(36)
  name           String
  description    String?             @db.Text
  category       String
  targetValue    Float
  currentValue   Float               @default(0)
  unit           String
  frequency      String
  ownerId        String              @db.Char(36)
  formula        String?             @db.Text
  status         String              @default("On Track")
  createdAt      DateTime            @default(now())
  updatedAt      DateTime            @updatedAt
  year           Int
  objectiveId    String?             @db.Char(36)
  objective      CompanyObjective?   @relation(fields: [objectiveId], references: [id])
  owner          user                @relation("BSCKPIOwner", fields: [ownerId], references: [id])
  measurements   BSCKPIMeasurement[]
  departmentKPIs DepartmentKPI[]

  @@index([year])
  @@index([objectiveId])
  @@index([category])
  @@index([ownerId])
  @@index([status])
  @@map("balanced_scorecard_kpis")
}

model BSCKPIMeasurement {
  id             String               @id @default(uuid()) @db.Char(36)
  kpiId          String               @db.Char(36)
  value          Float
  period         String
  notes          String?              @db.Text
  recordedBy     String               @db.Char(36)
  recordedDate   DateTime             @default(now())
  kpi            BalancedScorecardKPI @relation(fields: [kpiId], references: [id], onDelete: Cascade)
  recordedByUser user                 @relation("BSCKPIMeasurementRecorder", fields: [recordedBy], references: [id])

  @@index([kpiId])
  @@index([period])
  @@index([recordedDate])
  @@index([recordedBy], map: "bsc_kpi_measurements_recordedBy_fkey")
  @@map("bsc_kpi_measurements")
}

model AnnualInitiative {
  id             String           @id @default(uuid()) @db.Char(36)
  objectiveId    String           @db.Char(36)
  name           String
  description    String?          @db.Text
  expectedImpact String?          @db.Text
  startDate      DateTime?
  endDate        DateTime?
  ownerId        String           @db.Char(36)
  departmentId   String?          @db.Char(36)
  status         String           @default("Planned")
  progress       Float            @default(0)
  budget         Float?           @default(0)
  createdAt      DateTime         @default(now())
  updatedAt      DateTime         @updatedAt
  year           Int
  department     department?      @relation("AnnualInitiativeDepartment", fields: [departmentId], references: [id])
  objective      CompanyObjective @relation(fields: [objectiveId], references: [id], onDelete: Cascade)
  owner          user             @relation("AnnualInitiativeOwner", fields: [ownerId], references: [id])

  @@index([year])
  @@index([objectiveId])
  @@index([ownerId])
  @@index([departmentId])
  @@index([status])
  @@map("annual_initiatives")
}

model DepartmentPlan {
  id           String                 @id @default(uuid()) @db.Char(36)
  annualPlanId String                 @db.Char(36)
  departmentId String                 @db.Char(36)
  year         Int
  vision       String?                @db.Text
  priorities   Json?
  risks        Json?
  dependencies Json?
  createdAt    DateTime               @default(now())
  updatedAt    DateTime               @updatedAt
  name         String?                @db.VarChar(255)
  initiatives  DepartmentInitiative[]
  kpis         DepartmentKPI[]
  objectives   DepartmentObjective[]
  annualPlan   AnnualPlan             @relation(fields: [annualPlanId], references: [id], onDelete: Cascade)
  department   department             @relation("DepartmentPlanDept", fields: [departmentId], references: [id])

  @@index([annualPlanId])
  @@index([departmentId])
  @@index([year])
  @@map("department_plans")
}

model DepartmentObjective {
  id                 String            @id @default(uuid()) @db.Char(36)
  departmentPlanId   String            @db.Char(36)
  companyObjectiveId String?           @db.Char(36)
  title              String
  description        String?           @db.Text
  ownerId            String            @db.Char(36)
  status             String            @default("Not Started")
  progress           Float             @default(0)
  createdAt          DateTime          @default(now())
  updatedAt          DateTime          @updatedAt
  companyObjective   CompanyObjective? @relation(fields: [companyObjectiveId], references: [id])
  departmentPlan     DepartmentPlan    @relation(fields: [departmentPlanId], references: [id], onDelete: Cascade)
  owner              user              @relation("DeptObjectiveOwner", fields: [ownerId], references: [id])

  @@index([departmentPlanId])
  @@index([companyObjectiveId])
  @@index([ownerId])
  @@index([status])
  @@map("department_objectives")
}

model DepartmentKPI {
  id               String                     @id @default(uuid()) @db.Char(36)
  departmentPlanId String                     @db.Char(36)
  companyKPIId     String?                    @db.Char(36)
  name             String
  description      String?                    @db.Text
  category         String
  targetValue      Float
  currentValue     Float                      @default(0)
  unit             String
  frequency        String
  ownerId          String                     @db.Char(36)
  status           String                     @default("On Track")
  createdAt        DateTime                   @default(now())
  updatedAt        DateTime                   @updatedAt
  measurements     DepartmentKPIMeasurement[]
  companyKPI       BalancedScorecardKPI?      @relation(fields: [companyKPIId], references: [id])
  departmentPlan   DepartmentPlan             @relation(fields: [departmentPlanId], references: [id], onDelete: Cascade)
  owner            user                       @relation("DeptKPIOwner", fields: [ownerId], references: [id])

  @@index([departmentPlanId])
  @@index([companyKPIId])
  @@index([ownerId])
  @@index([category])
  @@index([status])
  @@map("department_kpis")
}

model DepartmentKPIMeasurement {
  id             String        @id @default(uuid()) @db.Char(36)
  kpiId          String        @db.Char(36)
  value          Float
  period         String
  notes          String?       @db.Text
  recordedBy     String        @db.Char(36)
  recordedDate   DateTime      @default(now())
  kpi            DepartmentKPI @relation(fields: [kpiId], references: [id], onDelete: Cascade)
  recordedByUser user          @relation("DeptKPIMeasurementRecorder", fields: [recordedBy], references: [id])

  @@index([kpiId])
  @@index([period])
  @@index([recordedDate])
  @@index([recordedBy], map: "department_kpi_measurements_recordedBy_fkey")
  @@map("department_kpi_measurements")
}

model DepartmentInitiative {
  id               String         @id @default(uuid()) @db.Char(36)
  departmentPlanId String         @db.Char(36)
  name             String
  description      String?        @db.Text
  startDate        DateTime?
  endDate          DateTime?
  ownerId          String         @db.Char(36)
  status           String         @default("Planned")
  progress         Float          @default(0)
  createdAt        DateTime       @default(now())
  updatedAt        DateTime       @updatedAt
  departmentPlan   DepartmentPlan @relation(fields: [departmentPlanId], references: [id], onDelete: Cascade)
  owner            user           @relation("DeptInitiativeOwner", fields: [ownerId], references: [id])

  @@index([departmentPlanId])
  @@index([ownerId])
  @@index([status])
  @@map("department_initiatives")
}

model WeeklyIssue {
  id           String      @id @default(uuid()) @db.Char(36)
  title        String
  description  String?     @db.Text
  departmentId String?     @db.Char(36)
  raisedById   String      @db.Char(36)
  assignedToId String?     @db.Char(36)
  priority     String      @default("Medium")
  status       String      @default("Open")
  dueDate      DateTime?
  resolvedDate DateTime?
  resolution   String?     @db.Text
  createdAt    DateTime    @default(now())
  updatedAt    DateTime    @updatedAt
  assignedTo   user?       @relation("WeeklyIssueAssignedTo", fields: [assignedToId], references: [id])
  department   department? @relation("WeeklyIssueDept", fields: [departmentId], references: [id])
  raisedBy     user        @relation("WeeklyIssueRaisedBy", fields: [raisedById], references: [id])

  @@index([departmentId])
  @@index([raisedById])
  @@index([assignedToId])
  @@index([status])
  @@index([priority])
  @@map("weekly_issues")
}

model SystemSettings {
  id                 String   @id @default(uuid()) @db.Char(36)
  companyName        String   @default("HEXA STEEL")
  companyTagline     String   @default("THRIVE DIFFERENT")
  companyLogo        String?
  companyAddress     String?  @db.Text
  companyPhone       String?
  companyEmail       String?
  companyWebsite     String?
  defaultReportTheme String   @default("blue")
  reportFooterText   String   @default("HEXA STEEL - Professional Report")
  dateFormat         String   @default("DD-MM-YYYY")
  timezone           String   @default("UTC+03:00")
  currency           String   @default("SAR")
  emailNotifications Boolean  @default(true)
  smsNotifications   Boolean  @default(false)
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt

  @@map("system_settings")
}

model ProcessingTeam {
  id          String   @id @default(uuid()) @db.Char(36)
  name        String   @unique
  description String?
  isActive    Boolean  @default(true)
  isDefault   Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("processing_teams")
}

model ProcessingLocation {
  id          String   @id @default(uuid()) @db.Char(36)
  name        String   @unique
  description String?
  isActive    Boolean  @default(true)
  isDefault   Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("processing_locations")
}

model AIInteraction {
  id             String   @id @default(uuid()) @db.Char(36)
  userId         String   @db.Char(36)
  conversationId String?  @db.Char(36)
  role           String
  message        String   @db.LongText
  response       String?  @db.LongText
  contextType    String?
  contextMeta    Json?
  createdAt      DateTime @default(now())
  user           user     @relation("UserAIInteractions", fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([conversationId])
  @@index([createdAt])
  @@map("ai_interactions")
}

model Notification {
  id                String           @id @default(uuid()) @db.Char(36)
  userId            String           @db.Char(36)
  type              NotificationType
  title             String
  message           String           @db.Text
  relatedEntityType String?
  relatedEntityId   String?          @db.Char(36)
  isRead            Boolean          @default(false)
  readAt            DateTime?
  isArchived        Boolean          @default(false)
  archivedAt        DateTime?
  deadlineAt        DateTime?
  metadata          Json?
  createdAt         DateTime         @default(now())
  updatedAt         DateTime         @updatedAt
  user              user             @relation("UserNotifications", fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([type])
  @@index([isRead])
  @@index([isArchived])
  @@index([createdAt])
  @@index([deadlineAt])
  @@map("notifications")
}

model UserDashboardWidget {
  id         String   @id @default(uuid()) @db.Char(36)
  userId     String   @db.Char(36)
  widgetType String
  widgetSize String   @default("medium")
  position   Int
  isVisible  Boolean  @default(true)
  settings   Json?
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  user       user     @relation("UserDashboardWidgets", fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([widgetType])
  @@index([position])
  @@map("user_dashboard_widgets")
}

model WorkUnit {
  id                   String                 @id @default(uuid()) @db.Char(36)
  projectId            String                 @db.Char(36)
  type                 WorkUnitType
  referenceModule      String
  referenceId          String                 @db.Char(36)
  ownerId              String                 @db.Char(36)
  plannedStart         DateTime
  plannedEnd           DateTime
  actualStart          DateTime?
  actualEnd            DateTime?
  quantity             Float?
  weight               Float?
  status               WorkUnitStatus         @default(NOT_STARTED)
  createdAt            DateTime               @default(now())
  updatedAt            DateTime               @updatedAt
  knowledgeapplication knowledgeapplication[]
  knowledgeentry       knowledgeentry[]
  dependenciesFrom     WorkUnitDependency[]   @relation("DependencyFrom")
  dependenciesTo       WorkUnitDependency[]   @relation("DependencyTo")
  owner                user                   @relation("WorkUnitOwner", fields: [ownerId], references: [id])
  project              project                @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@index([projectId])
  @@index([ownerId])
  @@index([type])
  @@index([status])
  @@index([referenceModule, referenceId])
  @@index([plannedStart])
  @@index([plannedEnd])
  @@map("work_units")
}

model WorkUnitDependency {
  id             String         @id @default(uuid()) @db.Char(36)
  fromWorkUnitId String         @db.Char(36)
  toWorkUnitId   String         @db.Char(36)
  dependencyType DependencyType @default(FS)
  lagDays        Int            @default(0)
  createdAt      DateTime       @default(now())
  fromWorkUnit   WorkUnit       @relation("DependencyFrom", fields: [fromWorkUnitId], references: [id], onDelete: Cascade)
  toWorkUnit     WorkUnit       @relation("DependencyTo", fields: [toWorkUnitId], references: [id], onDelete: Cascade)

  @@unique([fromWorkUnitId, toWorkUnitId])
  @@index([fromWorkUnitId])
  @@index([toWorkUnitId])
  @@map("work_unit_dependencies")
}

model ResourceCapacity {
  id                 String       @id @default(uuid()) @db.Char(36)
  resourceType       ResourceType
  resourceId         String?      @db.Char(36)
  resourceName       String
  capacityPerDay     Float
  unit               CapacityUnit
  workingDaysPerWeek Int          @default(5)
  isActive           Boolean      @default(true)
  notes              String?      @db.Text
  createdAt          DateTime     @default(now())
  updatedAt          DateTime     @updatedAt

  @@index([resourceType])
  @@index([resourceId])
  @@index([isActive])
  @@map("resource_capacities")
}

model DependencyBlueprint {
  id            String                    @id @default(uuid()) @db.Char(36)
  name          String                    @unique
  description   String?                   @db.Text
  structureType String?
  isActive      Boolean                   @default(true)
  isDefault     Boolean                   @default(false)
  createdAt     DateTime                  @default(now())
  updatedAt     DateTime                  @updatedAt
  steps         DependencyBlueprintStep[]

  @@index([isActive])
  @@index([structureType])
  @@map("dependency_blueprints")
}

model DependencyBlueprintStep {
  id                  String              @id @default(uuid()) @db.Char(36)
  blueprintId         String              @db.Char(36)
  fromType            WorkUnitType
  toType              WorkUnitType
  dependencyType      DependencyType      @default(FS)
  lagDays             Int                 @default(0)
  fromReferenceModule String?
  toReferenceModule   String?
  sequenceOrder       Int                 @default(0)
  createdAt           DateTime            @default(now())
  blueprint           DependencyBlueprint @relation(fields: [blueprintId], references: [id], onDelete: Cascade)

  @@index([blueprintId])
  @@index([fromType])
  @@index([toType])
  @@map("dependency_blueprint_steps")
}

model RiskEvent {
  id                  String       @id @default(uuid()) @db.Char(36)
  severity            RiskSeverity
  type                RiskType
  affectedProjectIds  Json
  affectedWorkUnitIds Json
  reason              String       @db.Text
  recommendedAction   String       @db.Text
  fingerprint         String       @unique @db.VarChar(255)
  detectedAt          DateTime     @default(now())
  resolvedAt          DateTime?
  metadata            Json?
  createdAt           DateTime     @default(now())
  updatedAt           DateTime     @updatedAt

  @@index([severity])
  @@index([type])
  @@index([detectedAt])
  @@index([resolvedAt])
  @@map("risk_events")
}

model PTSSyncConfig {
  id              String       @id @default(uuid()) @db.Char(36)
  name            String
  spreadsheetId   String
  sheetName       String
  projectId       String       @db.Char(36)
  columnMapping   Json
  headerRow       Int          @default(1)
  dataStartRow    Int          @default(2)
  syncInterval    Int          @default(0)
  lastSyncAt      DateTime?
  isActive        Boolean      @default(true)
  autoCreateParts Boolean      @default(true)
  createdAt       DateTime     @default(now())
  updatedAt       DateTime     @updatedAt
  syncLogs        PTSSyncLog[]

  @@index([projectId])
  @@index([isActive])
  @@map("pts_sync_configs")
}

model PTSSyncLog {
  id          String        @id @default(uuid()) @db.Char(36)
  configId    String        @db.Char(36)
  status      String
  totalRows   Int
  syncedRows  Int
  skippedRows Int
  errors      Json
  duration    Int
  syncedAt    DateTime      @default(now())
  config      PTSSyncConfig @relation(fields: [configId], references: [id], onDelete: Cascade)

  @@index([configId])
  @@index([syncedAt])
  @@map("pts_sync_logs")
}

model assemblypart {
  id                                  String          @id @db.Char(36)
  projectId                           String          @db.Char(36)
  buildingId                          String?         @db.Char(36)
  partDesignation                     String          @unique(map: "AssemblyPart_partDesignation_key")
  assemblyMark                        String
  subAssemblyMark                     String?
  partMark                            String
  quantity                            Int
  name                                String
  profile                             String?
  grade                               String?
  lengthMm                            Decimal?        @db.Decimal(10, 2)
  netAreaPerUnit                      Decimal?        @db.Decimal(10, 4)
  netAreaTotal                        Decimal?        @db.Decimal(10, 4)
  singlePartWeight                    Decimal?        @db.Decimal(10, 2)
  netWeightTotal                      Decimal?        @db.Decimal(10, 2)
  status                              String          @default("Pending")
  currentProcess                      String?
  createdById                         String          @db.Char(36)
  updatedById                         String?         @db.Char(36)
  createdAt                           DateTime        @default(now())
  updatedAt                           DateTime
  deleteReason                        String?         @db.VarChar(500)
  deletedAt                           DateTime?
  deletedById                         String?         @db.Char(36)
  externalRef                         String?
  source                              String?
  building                            building?       @relation(fields: [buildingId], references: [id], map: "AssemblyPart_buildingId_fkey")
  user_assemblypart_createdByIdTouser user            @relation("assemblypart_createdByIdTouser", fields: [createdById], references: [id], map: "AssemblyPart_createdById_fkey")
  user_assemblypart_deletedByIdTouser user?           @relation("assemblypart_deletedByIdTouser", fields: [deletedById], references: [id], map: "AssemblyPart_deletedById_fkey")
  project                             project         @relation(fields: [projectId], references: [id], onDelete: Cascade, map: "AssemblyPart_projectId_fkey")
  user_assemblypart_updatedByIdTouser user?           @relation("assemblypart_updatedByIdTouser", fields: [updatedById], references: [id], map: "AssemblyPart_updatedById_fkey")
  productionlog                       productionlog[]
  workorderpart                       workorderpart[]

  @@index([assemblyMark], map: "AssemblyPart_assemblyMark_idx")
  @@index([buildingId], map: "AssemblyPart_buildingId_idx")
  @@index([createdById], map: "AssemblyPart_createdById_fkey")
  @@index([deletedById], map: "AssemblyPart_deletedById_fkey")
  @@index([partDesignation], map: "AssemblyPart_partDesignation_idx")
  @@index([partMark], map: "AssemblyPart_partMark_idx")
  @@index([projectId], map: "AssemblyPart_projectId_idx")
  @@index([status], map: "AssemblyPart_status_idx")
  @@index([updatedById], map: "AssemblyPart_updatedById_fkey")
}

model auditlog {
  id            String          @id @db.Char(36)
  entityType    String
  entityId      String          @db.Char(36)
  action        auditlog_action
  changes       Json?
  performedById String          @db.Char(36)
  performedAt   DateTime        @default(now())
  requestId     String?         @db.VarChar(64)
  sourceModule  String?         @db.VarChar(100)
  reason        String?         @db.Text
  metadata      Json?
  user          user            @relation(fields: [performedById], references: [id], map: "AuditLog_performedById_fkey")

  @@index([action], map: "AuditLog_action_idx")
  @@index([entityType, entityId], map: "AuditLog_entityType_entityId_idx")
  @@index([performedAt], map: "AuditLog_performedAt_idx")
  @@index([performedById], map: "AuditLog_performedById_idx")
  @@index([requestId], map: "AuditLog_requestId_idx")
}

model building {
  id                    String                  @id @db.Char(36)
  projectId             String                  @db.Char(36)
  designation           String
  name                  String
  description           String?
  createdAt             DateTime                @default(now())
  updatedAt             DateTime
  deleteReason          String?                 @db.VarChar(500)
  deletedAt             DateTime?
  deletedById           String?                 @db.Char(36)
  assemblypart          assemblypart[]
  user                  user?                   @relation(fields: [deletedById], references: [id], map: "Building_deletedById_fkey")
  project               project                 @relation(fields: [projectId], references: [id], onDelete: Cascade, map: "Building_projectId_fkey")
  dimensionalinspection dimensionalinspection[]
  documentsubmission    documentsubmission[]
  knowledgeentry        knowledgeentry[]
  ncrreport             ncrreport[]
  ndtinspection         ndtinspection[]
  operationevent        operationevent[]
  rfirequest            rfirequest[]
  scopeschedule         scopeschedule[]
  task                  task[]
  weldinginspection     weldinginspection[]
  workorder             workorder[]

  @@unique([projectId, designation], map: "Building_projectId_designation_key")
  @@index([deletedById], map: "Building_deletedById_fkey")
  @@index([projectId], map: "Building_projectId_idx")
}

model client {
  id        String    @id @db.Char(36)
  name      String
  email     String?
  phone     String?
  address   String?
  country   String?
  createdAt DateTime  @default(now())
  updatedAt DateTime
  project   project[]
}

model department {
  id                                 String             @id @db.Char(36)
  name                               String             @unique(map: "Department_name_key")
  description                        String?
  managerId                          String?            @unique(map: "Department_managerId_key") @db.Char(36)
  createdAt                          DateTime           @default(now())
  updatedAt                          DateTime
  annualInitiatives                  AnnualInitiative[] @relation("AnnualInitiativeDepartment")
  user_department_managerIdTouser    user?              @relation("department_managerIdTouser", fields: [managerId], references: [id], map: "Department_managerId_fkey")
  departmentPlans                    DepartmentPlan[]   @relation("DepartmentPlanDept")
  initiative                         initiative[]
  task                               task[]
  user_user_departmentIdTodepartment user[]             @relation("user_departmentIdTodepartment")
  weeklyIssues                       WeeklyIssue[]      @relation("WeeklyIssueDept")
}

model dimensionalinspection {
  id                 String        @id @db.Char(36)
  inspectionNumber   String        @unique(map: "DimensionalInspection_inspectionNumber_key")
  projectId          String        @db.Char(36)
  buildingId         String?       @db.Char(36)
  productionLogId    String        @db.Char(36)
  partDesignation    String
  drawingReference   String?
  measuredLength     Float?
  requiredLength     Float?
  lengthTolerance    Float?
  measuredWidth      Float?
  requiredWidth      Float?
  widthTolerance     Float?
  measuredHeight     Float?
  requiredHeight     Float?
  heightTolerance    Float?
  measuredThickness  Float?
  requiredThickness  Float?
  thicknessTolerance Float?
  straightness       String?
  flatness           String?
  squareness         String?
  inspectorId        String        @db.Char(36)
  inspectionDate     DateTime      @default(now())
  toleranceCheck     String        @default("Pending")
  result             String        @default("Pending")
  remarks            String?       @db.Text
  attachments        String?       @db.Text
  createdAt          DateTime      @default(now())
  updatedAt          DateTime
  building           building?     @relation(fields: [buildingId], references: [id], map: "DimensionalInspection_buildingId_fkey")
  user               user          @relation(fields: [inspectorId], references: [id], map: "DimensionalInspection_inspectorId_fkey")
  productionlog      productionlog @relation(fields: [productionLogId], references: [id], onDelete: Cascade, map: "DimensionalInspection_productionLogId_fkey")
  project            project       @relation(fields: [projectId], references: [id], onDelete: Cascade, map: "DimensionalInspection_projectId_fkey")

  @@index([buildingId], map: "DimensionalInspection_buildingId_idx")
  @@index([inspectionDate], map: "DimensionalInspection_inspectionDate_idx")
  @@index([inspectorId], map: "DimensionalInspection_inspectorId_idx")
  @@index([productionLogId], map: "DimensionalInspection_productionLogId_idx")
  @@index([projectId], map: "DimensionalInspection_projectId_idx")
  @@index([result], map: "DimensionalInspection_result_idx")
}

model document {
  id                                                                 String              @id @db.Char(36)
  documentNumber                                                     String              @unique(map: "Document_documentNumber_key")
  title                                                              String
  revision                                                           Int                 @default(0)
  categoryId                                                         String              @db.Char(36)
  description                                                        String?             @db.Text
  type                                                               String              @default("Procedure")
  standard                                                           String?
  filePath                                                           String?
  fileSize                                                           Int?
  fileType                                                           String?
  content                                                            String?             @db.LongText
  status                                                             String              @default("Draft")
  effectiveDate                                                      DateTime?
  reviewDate                                                         DateTime?
  uploadedById                                                       String              @db.Char(36)
  approvedById                                                       String?             @db.Char(36)
  tags                                                               String?
  createdAt                                                          DateTime            @default(now())
  updatedAt                                                          DateTime
  user_document_approvedByIdTouser                                   user?               @relation("document_approvedByIdTouser", fields: [approvedById], references: [id], map: "Document_approvedById_fkey")
  documentcategory                                                   documentcategory    @relation(fields: [categoryId], references: [id], map: "Document_categoryId_fkey")
  user_document_uploadedByIdTouser                                   user                @relation("document_uploadedByIdTouser", fields: [uploadedById], references: [id], map: "Document_uploadedById_fkey")
  documentreference_documentreference_documentIdTodocument           documentreference[] @relation("documentreference_documentIdTodocument")
  documentreference_documentreference_referencedDocumentIdTodocument documentreference[] @relation("documentreference_referencedDocumentIdTodocument")

  @@index([approvedById], map: "Document_approvedById_fkey")
  @@index([categoryId], map: "Document_categoryId_idx")
  @@index([documentNumber], map: "Document_documentNumber_idx")
  @@index([status], map: "Document_status_idx")
  @@index([uploadedById], map: "Document_uploadedById_fkey")
}

model documentcategory {
  id                     String             @id @db.Char(36)
  name                   String             @unique(map: "DocumentCategory_name_key")
  description            String?            @db.Text
  parentId               String?            @db.Char(36)
  order                  Int                @default(0)
  createdAt              DateTime           @default(now())
  updatedAt              DateTime
  document               document[]
  documentcategory       documentcategory?  @relation("documentcategoryTodocumentcategory", fields: [parentId], references: [id], onDelete: Cascade, map: "DocumentCategory_parentId_fkey")
  other_documentcategory documentcategory[] @relation("documentcategoryTodocumentcategory")

  @@index([parentId], map: "DocumentCategory_parentId_idx")
}

model documentreference {
  id                                                        String   @id @db.Char(36)
  documentId                                                String   @db.Char(36)
  referencedDocumentId                                      String   @db.Char(36)
  referenceType                                             String   @default("Related Form")
  createdAt                                                 DateTime @default(now())
  document_documentreference_documentIdTodocument           document @relation("documentreference_documentIdTodocument", fields: [documentId], references: [id], onDelete: Cascade, map: "DocumentReference_documentId_fkey")
  document_documentreference_referencedDocumentIdTodocument document @relation("documentreference_referencedDocumentIdTodocument", fields: [referencedDocumentId], references: [id], onDelete: Cascade, map: "DocumentReference_referencedDocumentId_fkey")

  @@index([documentId], map: "DocumentReference_documentId_idx")
  @@index([referencedDocumentId], map: "DocumentReference_referencedDocumentId_idx")
}

model documentrevision {
  id                                      String             @id @db.Char(36)
  submissionId                            String             @db.Char(36)
  revision                                String
  submissionDate                          DateTime
  submittedBy                             String             @db.Char(36)
  handledBy                               String?            @db.Char(36)
  documentType                            String?
  status                                  String
  comments                                String?            @db.Text
  clientCode                              String?
  clientResponse                          String?
  clientComments                          String?            @db.Text
  approvalDate                            DateTime?
  attachments                             Json?
  createdAt                               DateTime           @default(now())
  user_documentrevision_handledByTouser   user?              @relation("documentrevision_handledByTouser", fields: [handledBy], references: [id], map: "DocumentRevision_handledBy_fkey")
  documentsubmission                      documentsubmission @relation(fields: [submissionId], references: [id], onDelete: Cascade, map: "DocumentRevision_submissionId_fkey")
  user_documentrevision_submittedByTouser user               @relation("documentrevision_submittedByTouser", fields: [submittedBy], references: [id], map: "DocumentRevision_submittedBy_fkey")

  @@index([handledBy], map: "DocumentRevision_handledBy_idx")
  @@index([revision], map: "DocumentRevision_revision_idx")
  @@index([status], map: "DocumentRevision_status_idx")
  @@index([submissionId], map: "DocumentRevision_submissionId_idx")
  @@index([submittedBy], map: "DocumentRevision_submittedBy_fkey")
}

model documentsubmission {
  id                                        String             @id @db.Char(36)
  submissionNumber                          String             @unique(map: "DocumentSubmission_submissionNumber_key")
  projectId                                 String             @db.Char(36)
  buildingId                                String?            @db.Char(36)
  documentType                              String
  section                                   String?
  title                                     String
  description                               String?            @db.Text
  revision                                  String             @default("R0")
  handledBy                                 String?            @db.Char(36)
  submittedBy                               String             @db.Char(36)
  submissionDate                            DateTime
  reviewDueDate                             DateTime?
  approvalDate                              DateTime?
  clientResponseDate                        DateTime?
  status                                    String             @default("In progress")
  clientCode                                String?
  clientResponse                            String?
  clientResponseDate2                       DateTime?
  internalComments                          String?            @db.Text
  clientComments                            String?            @db.Text
  rejectionReason                           String?            @db.Text
  daysCount                                 Int?
  attachments                               Json?
  createdAt                                 DateTime           @default(now())
  updatedAt                                 DateTime
  documentrevision                          documentrevision[]
  building                                  building?          @relation(fields: [buildingId], references: [id], map: "DocumentSubmission_buildingId_fkey")
  user_documentsubmission_handledByTouser   user?              @relation("documentsubmission_handledByTouser", fields: [handledBy], references: [id], map: "DocumentSubmission_handledBy_fkey")
  project                                   project            @relation(fields: [projectId], references: [id], onDelete: Cascade, map: "DocumentSubmission_projectId_fkey")
  user_documentsubmission_submittedByTouser user               @relation("documentsubmission_submittedByTouser", fields: [submittedBy], references: [id], map: "DocumentSubmission_submittedBy_fkey")

  @@index([buildingId], map: "DocumentSubmission_buildingId_idx")
  @@index([documentType], map: "DocumentSubmission_documentType_idx")
  @@index([handledBy], map: "DocumentSubmission_handledBy_idx")
  @@index([projectId], map: "DocumentSubmission_projectId_idx")
  @@index([status], map: "DocumentSubmission_status_idx")
  @@index([submissionDate], map: "DocumentSubmission_submissionDate_idx")
  @@index([submissionNumber], map: "DocumentSubmission_submissionNumber_idx")
  @@index([submittedBy], map: "DocumentSubmission_submittedBy_idx")
}

model entityversion {
  id            String   @id @db.Char(36)
  entityType    String
  entityId      String   @db.Char(36)
  versionNumber Int
  snapshot      Json
  changeReason  String?  @db.VarChar(500)
  createdById   String   @db.Char(36)
  createdAt     DateTime @default(now())
  user          user     @relation(fields: [createdById], references: [id], map: "EntityVersion_createdById_fkey")

  @@unique([entityType, entityId, versionNumber], map: "EntityVersion_entityType_entityId_versionNumber_key")
  @@index([createdAt], map: "EntityVersion_createdAt_idx")
  @@index([createdById], map: "EntityVersion_createdById_fkey")
  @@index([entityType, entityId], map: "EntityVersion_entityType_entityId_idx")
}

model initiative {
  id                              String                @id @db.Char(36)
  initiativeNumber                String                @unique(map: "Initiative_initiativeNumber_key")
  name                            String
  category                        String?
  description                     String?               @db.Text
  objective                       String?               @db.Text
  ownerId                         String                @db.Char(36)
  departmentId                    String?               @db.Char(36)
  status                          String                @default("Planned")
  priority                        String                @default("Medium")
  startDate                       DateTime?
  endDate                         DateTime?
  actualStartDate                 DateTime?
  actualEndDate                   DateTime?
  progress                        Float?                @default(0)
  budget                          Float?                @default(0)
  kpiImpact                       Json?
  notes                           String?               @db.Text
  createdBy                       String                @db.Char(36)
  updatedBy                       String                @db.Char(36)
  createdAt                       DateTime              @default(now())
  updatedAt                       DateTime
  user_initiative_createdByTouser user                  @relation("initiative_createdByTouser", fields: [createdBy], references: [id], map: "Initiative_createdBy_fkey")
  department                      department?           @relation(fields: [departmentId], references: [id], map: "Initiative_departmentId_fkey")
  user_initiative_ownerIdTouser   user                  @relation("initiative_ownerIdTouser", fields: [ownerId], references: [id], map: "Initiative_ownerId_fkey")
  user_initiative_updatedByTouser user                  @relation("initiative_updatedByTouser", fields: [updatedBy], references: [id], map: "Initiative_updatedBy_fkey")
  initiativemilestone             initiativemilestone[]
  initiativetask                  initiativetask[]

  @@index([category], map: "Initiative_category_idx")
  @@index([createdBy], map: "Initiative_createdBy_fkey")
  @@index([departmentId], map: "Initiative_departmentId_idx")
  @@index([initiativeNumber], map: "Initiative_initiativeNumber_idx")
  @@index([ownerId], map: "Initiative_ownerId_idx")
  @@index([priority], map: "Initiative_priority_idx")
  @@index([status], map: "Initiative_status_idx")
  @@index([updatedBy], map: "Initiative_updatedBy_fkey")
}

model initiativemilestone {
  id            String     @id @db.Char(36)
  initiativeId  String     @db.Char(36)
  name          String
  description   String?    @db.Text
  plannedDate   DateTime?
  actualDate    DateTime?
  progress      Float?     @default(0)
  status        String     @default("Pending")
  responsibleId String?    @db.Char(36)
  createdAt     DateTime   @default(now())
  updatedAt     DateTime
  initiative    initiative @relation(fields: [initiativeId], references: [id], onDelete: Cascade, map: "InitiativeMilestone_initiativeId_fkey")
  user          user?      @relation(fields: [responsibleId], references: [id], map: "InitiativeMilestone_responsibleId_fkey")

  @@index([initiativeId], map: "InitiativeMilestone_initiativeId_idx")
  @@index([plannedDate], map: "InitiativeMilestone_plannedDate_idx")
  @@index([responsibleId], map: "InitiativeMilestone_responsibleId_idx")
  @@index([status], map: "InitiativeMilestone_status_idx")
}

model initiativetask {
  id           String     @id @db.Char(36)
  initiativeId String     @db.Char(36)
  taskName     String
  assignedTo   String?    @db.Char(36)
  startDate    DateTime?
  endDate      DateTime?
  status       String     @default("Pending")
  progress     Float?     @default(0)
  notes        String?    @db.Text
  createdAt    DateTime   @default(now())
  updatedAt    DateTime
  user         user?      @relation(fields: [assignedTo], references: [id], map: "InitiativeTask_assignedTo_fkey")
  initiative   initiative @relation(fields: [initiativeId], references: [id], onDelete: Cascade, map: "InitiativeTask_initiativeId_fkey")

  @@index([assignedTo], map: "InitiativeTask_assignedTo_idx")
  @@index([initiativeId], map: "InitiativeTask_initiativeId_idx")
  @@index([status], map: "InitiativeTask_status_idx")
}

model itp {
  id                          String        @id @db.Char(36)
  itpNumber                   String        @unique(map: "ITP_itpNumber_key")
  revision                    Int           @default(0)
  projectId                   String        @db.Char(36)
  type                        String        @default("CUSTOM")
  jobNo                       String?
  client                      String?
  applicableCodes             String?       @db.Text
  createdById                 String        @db.Char(36)
  approvedById                String?       @db.Char(36)
  clientApprovedBy            String?
  dateCreated                 DateTime      @default(now())
  dateApproved                DateTime?
  status                      String        @default("Draft")
  rejectionReason             String?       @db.Text
  pdfAttachment               String?
  remarks                     String?       @db.Text
  createdAt                   DateTime      @default(now())
  updatedAt                   DateTime
  user_itp_approvedByIdTouser user?         @relation("itp_approvedByIdTouser", fields: [approvedById], references: [id], map: "ITP_approvedById_fkey")
  user_itp_createdByIdTouser  user          @relation("itp_createdByIdTouser", fields: [createdById], references: [id], map: "ITP_createdById_fkey")
  project                     project       @relation(fields: [projectId], references: [id], onDelete: Cascade, map: "ITP_projectId_fkey")
  itpactivity                 itpactivity[]

  @@index([approvedById], map: "ITP_approvedById_fkey")
  @@index([createdById], map: "ITP_createdById_fkey")
  @@index([projectId], map: "ITP_projectId_idx")
  @@index([status], map: "ITP_status_idx")
}

model itpactivity {
  id                             String    @id @db.Char(36)
  itpId                          String    @db.Char(36)
  sequence                       Int
  section                        String    @default("Before Manufacturing")
  activityDescription            String    @db.Text
  referenceDocument              String?
  acceptanceCriteria             String?   @db.Text
  verifyingDocument              String?
  activityByManuf                String?
  activityByTPI                  String?
  activityByClient               String?
  inspectionType                 String?
  remark                         String?   @db.Text
  reportsReference               String?
  signAId                        String?   @db.Char(36)
  signBId                        String?   @db.Char(36)
  signCId                        String?   @db.Char(36)
  status                         String    @default("Pending")
  completedDate                  DateTime?
  createdAt                      DateTime  @default(now())
  updatedAt                      DateTime
  itp                            itp       @relation(fields: [itpId], references: [id], onDelete: Cascade, map: "ITPActivity_itpId_fkey")
  user_itpactivity_signAIdTouser user?     @relation("itpactivity_signAIdTouser", fields: [signAId], references: [id], map: "ITPActivity_signAId_fkey")
  user_itpactivity_signBIdTouser user?     @relation("itpactivity_signBIdTouser", fields: [signBId], references: [id], map: "ITPActivity_signBId_fkey")
  user_itpactivity_signCIdTouser user?     @relation("itpactivity_signCIdTouser", fields: [signCId], references: [id], map: "ITPActivity_signCId_fkey")

  @@index([itpId], map: "ITPActivity_itpId_idx")
  @@index([section], map: "ITPActivity_section_idx")
  @@index([sequence], map: "ITPActivity_sequence_idx")
  @@index([signAId], map: "ITPActivity_signAId_fkey")
  @@index([signBId], map: "ITPActivity_signBId_fkey")
  @@index([signCId], map: "ITPActivity_signCId_fkey")
}

model knowledgeapplication {
  id               String         @id @db.Char(36)
  knowledgeEntryId String         @db.Char(36)
  projectId        String         @db.Char(36)
  workUnitId       String?        @db.Char(36)
  appliedById      String         @db.Char(36)
  outcomeNotes     String?        @db.Text
  appliedAt        DateTime       @default(now())
  user             user           @relation(fields: [appliedById], references: [id], map: "KnowledgeApplication_appliedById_fkey")
  knowledgeentry   knowledgeentry @relation(fields: [knowledgeEntryId], references: [id], onDelete: Cascade, map: "KnowledgeApplication_knowledgeEntryId_fkey")
  project          project        @relation(fields: [projectId], references: [id], onDelete: Cascade, map: "KnowledgeApplication_projectId_fkey")
  work_units       WorkUnit?      @relation(fields: [workUnitId], references: [id], map: "KnowledgeApplication_workUnitId_fkey")

  @@index([appliedAt], map: "KnowledgeApplication_appliedAt_idx")
  @@index([appliedById], map: "KnowledgeApplication_appliedById_idx")
  @@index([knowledgeEntryId], map: "KnowledgeApplication_knowledgeEntryId_idx")
  @@index([projectId], map: "KnowledgeApplication_projectId_idx")
  @@index([workUnitId], map: "KnowledgeApplication_workUnitId_fkey")
}

model knowledgeentry {
  id                                      String                  @id @db.Char(36)
  type                                    knowledgeentry_type
  title                                   String
  summary                                 String                  @db.Text
  rootCause                               String?                 @db.Text
  resolution                              String?                 @db.Text
  recommendation                          String?                 @db.Text
  severity                                knowledgeentry_severity
  status                                  knowledgeentry_status
  process                                 knowledgeentry_process
  projectId                               String?                 @db.Char(36)
  buildingId                              String?                 @db.Char(36)
  workUnitId                              String?                 @db.Char(36)
  evidenceLinks                           Json?
  tags                                    Json?
  reportedById                            String                  @db.Char(36)
  ownerId                                 String?                 @db.Char(36)
  validatedById                           String?                 @db.Char(36)
  promotionSourceIssueId                  String?                 @db.Char(36)
  createdAt                               DateTime                @default(now())
  updatedAt                               DateTime
  validatedAt                             DateTime?
  attachments                             Json?
  knowledgeapplication                    knowledgeapplication[]
  building                                building?               @relation(fields: [buildingId], references: [id], map: "KnowledgeEntry_buildingId_fkey")
  user_knowledgeentry_ownerIdTouser       user?                   @relation("knowledgeentry_ownerIdTouser", fields: [ownerId], references: [id], map: "KnowledgeEntry_ownerId_fkey")
  project                                 project?                @relation(fields: [projectId], references: [id], map: "KnowledgeEntry_projectId_fkey")
  knowledgeentry                          knowledgeentry?         @relation("knowledgeentryToknowledgeentry", fields: [promotionSourceIssueId], references: [id], map: "KnowledgeEntry_promotionSourceIssueId_fkey")
  other_knowledgeentry                    knowledgeentry[]        @relation("knowledgeentryToknowledgeentry")
  user_knowledgeentry_reportedByIdTouser  user                    @relation("knowledgeentry_reportedByIdTouser", fields: [reportedById], references: [id], map: "KnowledgeEntry_reportedById_fkey")
  user_knowledgeentry_validatedByIdTouser user?                   @relation("knowledgeentry_validatedByIdTouser", fields: [validatedById], references: [id], map: "KnowledgeEntry_validatedById_fkey")
  work_units                              WorkUnit?               @relation(fields: [workUnitId], references: [id], map: "KnowledgeEntry_workUnitId_fkey")
  riskpatternentry                        riskpatternentry[]

  @@index([buildingId], map: "KnowledgeEntry_buildingId_idx")
  @@index([createdAt], map: "KnowledgeEntry_createdAt_idx")
  @@index([ownerId], map: "KnowledgeEntry_ownerId_fkey")
  @@index([process], map: "KnowledgeEntry_process_idx")
  @@index([projectId], map: "KnowledgeEntry_projectId_idx")
  @@index([promotionSourceIssueId], map: "KnowledgeEntry_promotionSourceIssueId_fkey")
  @@index([reportedById], map: "KnowledgeEntry_reportedById_idx")
  @@index([severity], map: "KnowledgeEntry_severity_idx")
  @@index([status], map: "KnowledgeEntry_status_idx")
  @@index([type], map: "KnowledgeEntry_type_idx")
  @@index([validatedById], map: "KnowledgeEntry_validatedById_idx")
  @@index([workUnitId], map: "KnowledgeEntry_workUnitId_idx")
}

model kpialert {
  id             String        @id @db.Char(36)
  kpiId          String        @db.Char(36)
  entityType     String
  entityId       String        @db.Char(36)
  level          String
  message        String        @db.Text
  acknowledgedBy String?       @db.Char(36)
  acknowledgedAt DateTime?
  createdAt      DateTime      @default(now())
  user           user?         @relation(fields: [acknowledgedBy], references: [id], map: "KPIAlert_acknowledgedBy_fkey")
  kpidefinition  kpidefinition @relation(fields: [kpiId], references: [id], onDelete: Cascade, map: "KPIAlert_kpiId_fkey")

  @@index([acknowledgedBy], map: "KPIAlert_acknowledgedBy_idx")
  @@index([entityType, entityId], map: "KPIAlert_entityType_entityId_idx")
  @@index([kpiId], map: "KPIAlert_kpiId_idx")
  @@index([level], map: "KPIAlert_level_idx")
}

model kpidefinition {
  id                                   String           @id @db.Char(36)
  code                                 String           @unique(map: "KPIDefinition_code_key")
  name                                 String
  description                          String?          @db.Text
  formula                              String           @db.Text
  sourceModules                        Json?
  frequency                            String
  weight                               Float            @default(1)
  target                               Float?
  calculationType                      String           @default("auto")
  unit                                 String?
  isActive                             Boolean          @default(true)
  createdById                          String           @db.Char(36)
  updatedById                          String           @db.Char(36)
  createdAt                            DateTime         @default(now())
  updatedAt                            DateTime
  kpialert                             kpialert[]
  user_kpidefinition_createdByIdTouser user             @relation("kpidefinition_createdByIdTouser", fields: [createdById], references: [id], map: "KPIDefinition_createdById_fkey")
  user_kpidefinition_updatedByIdTouser user             @relation("kpidefinition_updatedByIdTouser", fields: [updatedById], references: [id], map: "KPIDefinition_updatedById_fkey")
  kpihistory                           kpihistory[]
  kpimanualentry                       kpimanualentry[]
  kpiscore                             kpiscore[]
  kpitarget                            kpitarget[]

  @@index([code], map: "KPIDefinition_code_idx")
  @@index([createdById], map: "KPIDefinition_createdById_fkey")
  @@index([frequency], map: "KPIDefinition_frequency_idx")
  @@index([isActive], map: "KPIDefinition_isActive_idx")
  @@index([updatedById], map: "KPIDefinition_updatedById_fkey")
}

model kpihistory {
  id            String        @id @db.Char(36)
  kpiId         String        @db.Char(36)
  action        String
  payload       Json?
  performedBy   String?       @db.Char(36)
  createdAt     DateTime      @default(now())
  kpidefinition kpidefinition @relation(fields: [kpiId], references: [id], onDelete: Cascade, map: "KPIHistory_kpiId_fkey")
  user          user?         @relation(fields: [performedBy], references: [id], map: "KPIHistory_performedBy_fkey")

  @@index([action], map: "KPIHistory_action_idx")
  @@index([createdAt], map: "KPIHistory_createdAt_idx")
  @@index([kpiId], map: "KPIHistory_kpiId_idx")
  @@index([performedBy], map: "KPIHistory_performedBy_fkey")
}

model kpimanualentry {
  id                                    String        @id @db.Char(36)
  kpiId                                 String        @db.Char(36)
  userId                                String        @db.Char(36)
  periodStart                           DateTime
  periodEnd                             DateTime
  value                                 Float
  notes                                 String?       @db.Text
  approved                              Boolean       @default(false)
  approvedBy                            String?       @db.Char(36)
  approvedAt                            DateTime?
  createdById                           String        @db.Char(36)
  createdAt                             DateTime      @default(now())
  user_kpimanualentry_approvedByTouser  user?         @relation("kpimanualentry_approvedByTouser", fields: [approvedBy], references: [id], map: "KPIManualEntry_approvedBy_fkey")
  user_kpimanualentry_createdByIdTouser user          @relation("kpimanualentry_createdByIdTouser", fields: [createdById], references: [id], map: "KPIManualEntry_createdById_fkey")
  kpidefinition                         kpidefinition @relation(fields: [kpiId], references: [id], onDelete: Cascade, map: "KPIManualEntry_kpiId_fkey")
  user_kpimanualentry_userIdTouser      user          @relation("kpimanualentry_userIdTouser", fields: [userId], references: [id], map: "KPIManualEntry_userId_fkey")

  @@index([approvedBy], map: "KPIManualEntry_approvedBy_fkey")
  @@index([approved], map: "KPIManualEntry_approved_idx")
  @@index([createdById], map: "KPIManualEntry_createdById_fkey")
  @@index([kpiId], map: "KPIManualEntry_kpiId_idx")
  @@index([periodStart, periodEnd], map: "KPIManualEntry_periodStart_periodEnd_idx")
  @@index([userId], map: "KPIManualEntry_userId_idx")
}

model kpiscore {
  id            String        @id @db.Char(36)
  kpiId         String        @db.Char(36)
  entityType    String
  entityId      String?       @db.Char(36)
  periodStart   DateTime
  periodEnd     DateTime
  value         Float
  rawValue      Json?
  status        String
  computedBy    String?       @db.Char(36)
  createdAt     DateTime      @default(now())
  kpidefinition kpidefinition @relation(fields: [kpiId], references: [id], onDelete: Cascade, map: "KPIScore_kpiId_fkey")

  @@index([entityType, entityId], map: "KPIScore_entityType_entityId_idx")
  @@index([kpiId], map: "KPIScore_kpiId_idx")
  @@index([periodStart, periodEnd], map: "KPIScore_periodStart_periodEnd_idx")
  @@index([status], map: "KPIScore_status_idx")
}

model kpitarget {
  id            String        @id @db.Char(36)
  kpiId         String        @db.Char(36)
  entityType    String
  entityId      String?       @db.Char(36)
  period        String
  targetVal     Float
  createdAt     DateTime      @default(now())
  kpidefinition kpidefinition @relation(fields: [kpiId], references: [id], onDelete: Cascade, map: "KPITarget_kpiId_fkey")

  @@index([entityType, entityId], map: "KPITarget_entityType_entityId_idx")
  @@index([kpiId], map: "KPITarget_kpiId_idx")
  @@index([period], map: "KPITarget_period_idx")
}

model materialinspection {
  id                   String   @id @db.Char(36)
  inspectionNumber     String   @unique(map: "MaterialInspection_inspectionNumber_key")
  projectId            String   @db.Char(36)
  materialType         String
  grade                String
  specification        String
  supplier             String?
  heatNumber           String?
  millCertNumber       String?
  quantity             Float
  unit                 String
  inspectorId          String   @db.Char(36)
  inspectionDate       DateTime @default(now())
  result               String   @default("Pending")
  chemicalComposition  String?  @db.Text
  mechanicalProperties String?  @db.Text
  visualInspection     String?  @db.Text
  dimensionalCheck     String?  @db.Text
  remarks              String?  @db.Text
  attachments          String?  @db.Text
  createdAt            DateTime @default(now())
  updatedAt            DateTime
  user                 user     @relation(fields: [inspectorId], references: [id], map: "MaterialInspection_inspectorId_fkey")
  project              project  @relation(fields: [projectId], references: [id], onDelete: Cascade, map: "MaterialInspection_projectId_fkey")

  @@index([inspectionDate], map: "MaterialInspection_inspectionDate_idx")
  @@index([inspectorId], map: "MaterialInspection_inspectorId_idx")
  @@index([projectId], map: "MaterialInspection_projectId_idx")
  @@index([result], map: "MaterialInspection_result_idx")
}

model ncrreport {
  id                                String        @id @db.Char(36)
  ncrNumber                         String        @unique(map: "NCRReport_ncrNumber_key")
  projectId                         String        @db.Char(36)
  buildingId                        String?       @db.Char(36)
  productionLogId                   String        @db.Char(36)
  rfiRequestId                      String?       @db.Char(36)
  description                       String        @db.Text
  correctiveAction                  String?       @db.Text
  rootCause                         String?       @db.Text
  preventiveAction                  String?       @db.Text
  deadline                          DateTime
  closedDate                        DateTime?
  status                            String        @default("Open")
  severity                          String        @default("Medium")
  raisedById                        String        @db.Char(36)
  assignedToId                      String?       @db.Char(36)
  closedById                        String?       @db.Char(36)
  attachments                       String?       @db.Text
  createdAt                         DateTime      @default(now())
  updatedAt                         DateTime
  user_ncrreport_assignedToIdTouser user?         @relation("ncrreport_assignedToIdTouser", fields: [assignedToId], references: [id], map: "NCRReport_assignedToId_fkey")
  building                          building?     @relation(fields: [buildingId], references: [id], map: "NCRReport_buildingId_fkey")
  user_ncrreport_closedByIdTouser   user?         @relation("ncrreport_closedByIdTouser", fields: [closedById], references: [id], map: "NCRReport_closedById_fkey")
  productionlog                     productionlog @relation(fields: [productionLogId], references: [id], onDelete: Cascade, map: "NCRReport_productionLogId_fkey")
  project                           project       @relation(fields: [projectId], references: [id], onDelete: Cascade, map: "NCRReport_projectId_fkey")
  user_ncrreport_raisedByIdTouser   user          @relation("ncrreport_raisedByIdTouser", fields: [raisedById], references: [id], map: "NCRReport_raisedById_fkey")
  rfirequest                        rfirequest?   @relation(fields: [rfiRequestId], references: [id], map: "NCRReport_rfiRequestId_fkey")

  @@index([assignedToId], map: "NCRReport_assignedToId_fkey")
  @@index([buildingId], map: "NCRReport_buildingId_idx")
  @@index([closedById], map: "NCRReport_closedById_fkey")
  @@index([deadline], map: "NCRReport_deadline_idx")
  @@index([ncrNumber], map: "NCRReport_ncrNumber_idx")
  @@index([productionLogId], map: "NCRReport_productionLogId_idx")
  @@index([projectId], map: "NCRReport_projectId_idx")
  @@index([raisedById], map: "NCRReport_raisedById_fkey")
  @@index([rfiRequestId], map: "NCRReport_rfiRequestId_idx")
  @@index([status], map: "NCRReport_status_idx")
}

model ndtinspection {
  id                    String        @id @db.Char(36)
  inspectionNumber      String        @unique(map: "NDTInspection_inspectionNumber_key")
  projectId             String        @db.Char(36)
  buildingId            String?       @db.Char(36)
  productionLogId       String        @db.Char(36)
  ndtMethod             String
  testProcedure         String?
  acceptanceCriteria    String?
  equipmentId           String?
  equipmentCalibration  String?
  operatorName          String?
  operatorCertification String?
  testResult            String        @default("Pending")
  defectType            String?
  defectLocation        String?
  defectSize            String?
  defectDescription     String?       @db.Text
  inspectorId           String        @db.Char(36)
  inspectionDate        DateTime      @default(now())
  result                String        @default("Pending")
  remarks               String?       @db.Text
  attachments           String?       @db.Text
  createdAt             DateTime      @default(now())
  updatedAt             DateTime
  building              building?     @relation(fields: [buildingId], references: [id], map: "NDTInspection_buildingId_fkey")
  user                  user          @relation(fields: [inspectorId], references: [id], map: "NDTInspection_inspectorId_fkey")
  productionlog         productionlog @relation(fields: [productionLogId], references: [id], onDelete: Cascade, map: "NDTInspection_productionLogId_fkey")
  project               project       @relation(fields: [projectId], references: [id], onDelete: Cascade, map: "NDTInspection_projectId_fkey")

  @@index([buildingId], map: "NDTInspection_buildingId_idx")
  @@index([inspectionDate], map: "NDTInspection_inspectionDate_idx")
  @@index([inspectorId], map: "NDTInspection_inspectorId_idx")
  @@index([ndtMethod], map: "NDTInspection_ndtMethod_idx")
  @@index([productionLogId], map: "NDTInspection_productionLogId_idx")
  @@index([projectId], map: "NDTInspection_projectId_idx")
  @@index([result], map: "NDTInspection_result_idx")
}

model operationevent {
  id                   String               @id @db.Char(36)
  projectId            String               @db.Char(36)
  buildingId           String?              @db.Char(36)
  stage                String
  description          String?              @db.Text
  eventSource          String
  eventDate            DateTime
  status               String               @default("Completed")
  createdBy            String?              @db.Char(36)
  createdAt            DateTime             @default(now())
  updatedAt            DateTime
  building             building?            @relation(fields: [buildingId], references: [id], map: "OperationEvent_buildingId_fkey")
  project              project              @relation(fields: [projectId], references: [id], onDelete: Cascade, map: "OperationEvent_projectId_fkey")
  operationstageconfig operationstageconfig @relation(fields: [stage], references: [stageCode], map: "OperationEvent_stage_fkey")

  @@index([buildingId], map: "OperationEvent_buildingId_idx")
  @@index([eventDate], map: "OperationEvent_eventDate_idx")
  @@index([eventSource], map: "OperationEvent_eventSource_idx")
  @@index([projectId], map: "OperationEvent_projectId_idx")
  @@index([stage], map: "OperationEvent_stage_idx")
  @@index([status], map: "OperationEvent_status_idx")
}

model operationeventaudit {
  id           String    @id @db.Char(36)
  eventId      String    @db.Char(36)
  oldStatus    String?
  newStatus    String?
  oldDate      DateTime?
  newDate      DateTime?
  changedBy    String    @db.Char(36)
  changeReason String?   @db.Text
  changeDate   DateTime  @default(now())

  @@index([changeDate], map: "OperationEventAudit_changeDate_idx")
  @@index([changedBy], map: "OperationEventAudit_changedBy_idx")
  @@index([eventId], map: "OperationEventAudit_eventId_idx")
}

model operationstageconfig {
  id             String           @id @db.Char(36)
  stageCode      String           @unique(map: "OperationStageConfig_stageCode_key")
  stageName      String
  orderIndex     Int
  autoSource     String?
  description    String?          @db.Text
  color          String?
  icon           String?
  isMandatory    Boolean          @default(true)
  createdAt      DateTime         @default(now())
  updatedAt      DateTime
  operationevent operationevent[]

  @@index([orderIndex], map: "OperationStageConfig_orderIndex_idx")
  @@index([stageCode], map: "OperationStageConfig_stageCode_idx")
}

model passwordresettoken {
  id        String   @id @db.Char(36)
  token     String   @unique(map: "PasswordResetToken_token_key")
  userId    String   @db.Char(36)
  expiresAt DateTime
  createdAt DateTime @default(now())
  user      user     @relation(fields: [userId], references: [id], map: "PasswordResetToken_userId_fkey")

  @@index([userId], map: "PasswordResetToken_userId_fkey")
}

model productbacklogitem {
  id                String                       @id @db.Char(36)
  code              String                       @unique(map: "ProductBacklogItem_code_key")
  title             String
  description       String                       @db.Text
  type              productbacklogitem_type
  category          productbacklogitem_category
  businessReason    String                       @db.Text
  expectedValue     String?                      @db.Text
  priority          productbacklogitem_priority
  status            productbacklogitem_status
  affectedModules   Json
  riskLevel         productbacklogitem_riskLevel
  complianceFlag    Boolean                      @default(false)
  linkedObjectiveId String?                      @db.Char(36)
  linkedKpiId       String?                      @db.Char(36)
  createdById       String                       @db.Char(36)
  createdAt         DateTime                     @default(now())
  approvedById      String?                      @db.Char(36)
  approvedAt        DateTime?
  plannedAt         DateTime?
  completedAt       DateTime?
  user              user                         @relation(fields: [createdById], references: [id], map: "ProductBacklogItem_createdById_fkey")
  task              task[]

  @@index([category], map: "ProductBacklogItem_category_idx")
  @@index([createdAt], map: "ProductBacklogItem_createdAt_idx")
  @@index([createdById], map: "ProductBacklogItem_createdById_fkey")
  @@index([status], map: "ProductBacklogItem_status_idx")
  @@index([type, status, priority], map: "ProductBacklogItem_type_status_priority_idx")
}

model productionlog {
  id                    String                  @id @db.Char(36)
  assemblyPartId        String                  @db.Char(36)
  processType           String
  dateProcessed         DateTime
  processedQty          Int
  remainingQty          Int
  processingTeam        String?
  processingLocation    String?
  remarks               String?                 @db.Text
  reportNumber          String?
  qcStatus              String                  @default("Not Required")
  qcRequired            Boolean                 @default(false)
  createdById           String                  @db.Char(36)
  createdAt             DateTime                @default(now())
  updatedAt             DateTime
  externalRef           String?
  source                String                  @default("OTS")
  dimensionalinspection dimensionalinspection[]
  ncrreport             ncrreport[]
  ndtinspection         ndtinspection[]
  assemblypart          assemblypart            @relation(fields: [assemblyPartId], references: [id], onDelete: Cascade, map: "ProductionLog_assemblyPartId_fkey")
  user                  user                    @relation(fields: [createdById], references: [id], map: "ProductionLog_createdById_fkey")
  rfiproductionlog      rfiproductionlog[]
  weldinginspection     weldinginspection[]

  @@index([assemblyPartId], map: "ProductionLog_assemblyPartId_idx")
  @@index([createdById], map: "ProductionLog_createdById_fkey")
  @@index([dateProcessed], map: "ProductionLog_dateProcessed_idx")
  @@index([externalRef], map: "ProductionLog_externalRef_idx")
  @@index([processType], map: "ProductionLog_processType_idx")
  @@index([qcStatus], map: "ProductionLog_qcStatus_idx")
  @@index([source], map: "ProductionLog_source_idx")
}

model project {
  id                                  String                  @id @db.Char(36)
  name                                String
  createdAt                           DateTime                @default(now())
  updatedAt                           DateTime
  projectNumber                       String                  @unique(map: "Project_projectNumber_key")
  estimationNumber                    String?
  clientId                            String                  @db.Char(36)
  projectManagerId                    String                  @db.Char(36)
  salesEngineerId                     String?                 @db.Char(36)
  contractDate                        DateTime?
  downPaymentDate                     DateTime?
  plannedStartDate                    DateTime?
  plannedEndDate                      DateTime?
  actualStartDate                     DateTime?
  actualEndDate                       DateTime?
  status                              String                  @default("Draft")
  contractValue                       Decimal?                @db.Decimal(15, 2)
  downPayment                         Decimal?                @db.Decimal(15, 2)
  downPaymentAck                      Boolean                 @default(false)
  payment2                            Decimal?                @db.Decimal(15, 2)
  payment2Ack                         Boolean                 @default(false)
  payment3                            Decimal?                @db.Decimal(15, 2)
  payment3Ack                         Boolean                 @default(false)
  payment4                            Decimal?                @db.Decimal(15, 2)
  payment4Ack                         Boolean                 @default(false)
  payment5                            Decimal?                @db.Decimal(15, 2)
  payment5Ack                         Boolean                 @default(false)
  payment6                            Decimal?                @db.Decimal(15, 2)
  payment6Ack                         Boolean                 @default(false)
  preliminaryRetention                Decimal?                @db.Decimal(15, 2)
  hoRetention                         Decimal?                @db.Decimal(15, 2)
  structureType                       String?
  numberOfStructures                  Int?
  erectionSubcontractor               String?
  incoterm                            String?
  scopeOfWork                         String?                 @db.Text
  projectNature                       String?
  projectLocation                     String?
  engineeringDuration                 Int?
  fabricationDeliveryDuration         Int?
  erectionDuration                    Int?
  cranesIncluded                      Boolean                 @default(false)
  surveyorOurScope                    Boolean                 @default(false)
  contractualTonnage                  Decimal?                @db.Decimal(10, 2)
  engineeringTonnage                  Decimal?                @db.Decimal(10, 2)
  galvanized                          Boolean                 @default(false)
  galvanizationMicrons                Int?
  area                                Decimal?                @db.Decimal(10, 2)
  m2PerTon                            Decimal?                @db.Decimal(10, 2)
  paintCoat1                          String?
  paintCoat1Microns                   Int?
  paintCoat1Liters                    Decimal?                @db.Decimal(10, 2)
  paintCoat2                          String?
  paintCoat2Microns                   Int?
  paintCoat2Liters                    Decimal?                @db.Decimal(10, 2)
  paintCoat3                          String?
  paintCoat3Microns                   Int?
  paintCoat3Liters                    Decimal?                @db.Decimal(10, 2)
  paintCoat4                          String?
  paintCoat4Microns                   Int?
  paintCoat4Liters                    Decimal?                @db.Decimal(10, 2)
  topCoatRalNumber                    String?
  weldingProcess                      String?
  weldingWireAwsClass                 String?
  pqrNumber                           String?
  wpsNumber                           String?
  standardCode                        String?
  thirdPartyRequired                  Boolean                 @default(false)
  ndtTest                             String?
  applicableCodes                     String?
  remarks                             String?                 @db.Text
  downPaymentMilestone                String?
  payment2Milestone                   String?
  payment3Milestone                   String?
  payment4Milestone                   String?
  payment5Milestone                   String?
  payment6Milestone                   String?
  coatingSystem                       String?
  isGalvanized                        Boolean                 @default(false)
  scopeOfWorkJson                     Json?
  deleteReason                        String?                 @db.VarChar(500)
  deletedAt                           DateTime?
  deletedById                         String?                 @db.Char(36)
  assemblypart                        assemblypart[]
  building                            building[]
  dimensionalinspection               dimensionalinspection[]
  documentsubmission                  documentsubmission[]
  itp                                 itp[]
  knowledgeapplication                knowledgeapplication[]
  knowledgeentry                      knowledgeentry[]
  materialinspection                  materialinspection[]
  ncrreport                           ncrreport[]
  ndtinspection                       ndtinspection[]
  operationevent                      operationevent[]
  client                              client                  @relation(fields: [clientId], references: [id], map: "Project_clientId_fkey")
  user_project_deletedByIdTouser      user?                   @relation("project_deletedByIdTouser", fields: [deletedById], references: [id], map: "Project_deletedById_fkey")
  user_project_projectManagerIdTouser user                    @relation("project_projectManagerIdTouser", fields: [projectManagerId], references: [id], map: "Project_projectManagerId_fkey")
  user_project_salesEngineerIdTouser  user?                   @relation("project_salesEngineerIdTouser", fields: [salesEngineerId], references: [id], map: "Project_salesEngineerId_fkey")
  projectassignment                   projectassignment[]
  projectplan                         projectplan[]
  rfirequest                          rfirequest[]
  scopeschedule                       scopeschedule[]
  systemevent                         systemevent[]
  task                                task[]
  weldinginspection                   weldinginspection[]
  workUnits                           WorkUnit[]
  workorder                           workorder[]
  wps                                 wps[]

  @@index([clientId], map: "Project_clientId_fkey")
  @@index([deletedById], map: "Project_deletedById_fkey")
  @@index([projectManagerId], map: "Project_projectManagerId_fkey")
  @@index([salesEngineerId], map: "Project_salesEngineerId_fkey")
}

model projectassignment {
  id        String   @id @db.Char(36)
  projectId String   @db.Char(36)
  userId    String   @db.Char(36)
  createdAt DateTime @default(now())
  project   project  @relation(fields: [projectId], references: [id], map: "ProjectAssignment_projectId_fkey")
  user      user     @relation(fields: [userId], references: [id], map: "ProjectAssignment_userId_fkey")

  @@unique([projectId, userId], map: "ProjectAssignment_projectId_userId_key")
  @@index([userId], map: "ProjectAssignment_userId_fkey")
}

model projectplan {
  id                                 String    @id @db.Char(36)
  projectId                          String    @db.Char(36)
  phase                              String
  plannedStart                       DateTime?
  plannedEnd                         DateTime?
  plannedDuration                    Int?
  actualStart                        DateTime?
  actualEnd                          DateTime?
  actualDuration                     Int?
  progress                           Float     @default(0)
  responsibleDept                    String?
  status                             String    @default("Not Started")
  remarks                            String?   @db.Text
  createdById                        String    @db.Char(36)
  updatedById                        String?   @db.Char(36)
  createdAt                          DateTime  @default(now())
  updatedAt                          DateTime
  user_projectplan_createdByIdTouser user      @relation("projectplan_createdByIdTouser", fields: [createdById], references: [id], map: "ProjectPlan_createdById_fkey")
  project                            project   @relation(fields: [projectId], references: [id], onDelete: Cascade, map: "ProjectPlan_projectId_fkey")
  user_projectplan_updatedByIdTouser user?     @relation("projectplan_updatedByIdTouser", fields: [updatedById], references: [id], map: "ProjectPlan_updatedById_fkey")

  @@unique([projectId, phase], map: "ProjectPlan_projectId_phase_key")
  @@index([createdById], map: "ProjectPlan_createdById_fkey")
  @@index([phase], map: "ProjectPlan_phase_idx")
  @@index([projectId], map: "ProjectPlan_projectId_idx")
  @@index([status], map: "ProjectPlan_status_idx")
  @@index([updatedById], map: "ProjectPlan_updatedById_fkey")
}

model ptssyncbatch {
  id                                     String    @id @db.Char(36)
  syncType                               String
  status                                 String
  partsCreated                           Int       @default(0)
  partsUpdated                           Int       @default(0)
  logsCreated                            Int       @default(0)
  logsUpdated                            Int       @default(0)
  errorsCount                            Int       @default(0)
  projectNumbers                         Json
  durationMs                             Int
  metadata                               Json?
  userId                                 String    @db.Char(36)
  rolledBack                             Boolean   @default(false)
  rolledBackAt                           DateTime?
  rolledBackById                         String?   @db.Char(36)
  createdAt                              DateTime  @default(now())
  user_ptssyncbatch_rolledBackByIdTouser user?     @relation("ptssyncbatch_rolledBackByIdTouser", fields: [rolledBackById], references: [id], map: "PTSSyncBatch_rolledBackById_fkey")
  user_ptssyncbatch_userIdTouser         user      @relation("ptssyncbatch_userIdTouser", fields: [userId], references: [id], map: "PTSSyncBatch_userId_fkey")

  @@index([createdAt], map: "PTSSyncBatch_createdAt_idx")
  @@index([rolledBackById], map: "PTSSyncBatch_rolledBackById_fkey")
  @@index([rolledBack], map: "PTSSyncBatch_rolledBack_idx")
  @@index([userId], map: "PTSSyncBatch_userId_idx")
}

model rfiproductionlog {
  id              String        @id @db.Char(36)
  rfiRequestId    String        @db.Char(36)
  productionLogId String        @db.Char(36)
  createdAt       DateTime      @default(now())
  productionlog   productionlog @relation(fields: [productionLogId], references: [id], onDelete: Cascade, map: "RFIProductionLog_productionLogId_fkey")
  rfirequest      rfirequest    @relation(fields: [rfiRequestId], references: [id], onDelete: Cascade, map: "RFIProductionLog_rfiRequestId_fkey")

  @@unique([rfiRequestId, productionLogId], map: "RFIProductionLog_rfiRequestId_productionLogId_key")
  @@index([productionLogId], map: "RFIProductionLog_productionLogId_idx")
  @@index([rfiRequestId], map: "RFIProductionLog_rfiRequestId_idx")
}

model rfirequest {
  id                                  String             @id @db.Char(36)
  rfiNumber                           String?            @unique(map: "RFIRequest_rfiNumber_key")
  projectId                           String             @db.Char(36)
  buildingId                          String?            @db.Char(36)
  inspectionType                      String
  processType                         String?
  requestDate                         DateTime           @default(now())
  inspectionDate                      DateTime?
  requestedById                       String             @db.Char(36)
  assignedToId                        String?            @db.Char(36)
  status                              String             @default("Waiting for Inspection")
  qcComments                          String?            @db.Text
  attachments                         String?            @db.Text
  createdAt                           DateTime           @default(now())
  updatedAt                           DateTime
  ncrreport                           ncrreport[]
  rfiproductionlog                    rfiproductionlog[]
  user_rfirequest_assignedToIdTouser  user?              @relation("rfirequest_assignedToIdTouser", fields: [assignedToId], references: [id], map: "RFIRequest_assignedToId_fkey")
  building                            building?          @relation(fields: [buildingId], references: [id], map: "RFIRequest_buildingId_fkey")
  project                             project            @relation(fields: [projectId], references: [id], onDelete: Cascade, map: "RFIRequest_projectId_fkey")
  user_rfirequest_requestedByIdTouser user               @relation("rfirequest_requestedByIdTouser", fields: [requestedById], references: [id], map: "RFIRequest_requestedById_fkey")

  @@index([assignedToId], map: "RFIRequest_assignedToId_fkey")
  @@index([buildingId], map: "RFIRequest_buildingId_idx")
  @@index([projectId], map: "RFIRequest_projectId_idx")
  @@index([requestDate], map: "RFIRequest_requestDate_idx")
  @@index([requestedById], map: "RFIRequest_requestedById_fkey")
  @@index([status], map: "RFIRequest_status_idx")
}

model riskpattern {
  id               String              @id @db.Char(36)
  patternKey       String              @unique(map: "RiskPattern_patternKey_key")
  process          riskpattern_process
  tags             Json
  occurrenceCount  Int
  timeWindow       String
  status           riskpattern_status  @default(Observed)
  createdAt        DateTime            @default(now())
  updatedAt        DateTime
  riskpatternentry riskpatternentry[]

  @@index([createdAt], map: "RiskPattern_createdAt_idx")
  @@index([occurrenceCount], map: "RiskPattern_occurrenceCount_idx")
  @@index([process], map: "RiskPattern_process_idx")
  @@index([status], map: "RiskPattern_status_idx")
}

model riskpatternentry {
  id               String         @id @db.Char(36)
  riskPatternId    String         @db.Char(36)
  knowledgeEntryId String         @db.Char(36)
  createdAt        DateTime       @default(now())
  knowledgeentry   knowledgeentry @relation(fields: [knowledgeEntryId], references: [id], onDelete: Cascade, map: "RiskPatternEntry_knowledgeEntryId_fkey")
  riskpattern      riskpattern    @relation(fields: [riskPatternId], references: [id], onDelete: Cascade, map: "RiskPatternEntry_riskPatternId_fkey")

  @@unique([riskPatternId, knowledgeEntryId], map: "RiskPatternEntry_riskPatternId_knowledgeEntryId_key")
  @@index([knowledgeEntryId], map: "RiskPatternEntry_knowledgeEntryId_idx")
  @@index([riskPatternId], map: "RiskPatternEntry_riskPatternId_idx")
}

model role {
  id          String   @id @db.Char(36)
  name        String   @unique(map: "Role_name_key")
  description String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime
  permissions Json?
  user        user[]
}

model scopeschedule {
  id         String   @id @db.Char(36)
  buildingId String   @db.Char(36)
  projectId  String   @db.Char(36)
  scopeType  String
  scopeLabel String
  startDate  DateTime
  endDate    DateTime
  createdAt  DateTime @default(now())
  updatedAt  DateTime
  building   building @relation(fields: [buildingId], references: [id], onDelete: Cascade, map: "ScopeSchedule_buildingId_fkey")
  project    project  @relation(fields: [projectId], references: [id], onDelete: Cascade, map: "ScopeSchedule_projectId_fkey")

  @@unique([buildingId, scopeType], map: "ScopeSchedule_buildingId_scopeType_key")
  @@index([buildingId], map: "ScopeSchedule_buildingId_idx")
  @@index([projectId], map: "ScopeSchedule_projectId_idx")
}

model systemevent {
  id          String               @id @db.Char(36)
  eventType   String
  category    String
  title       String               @db.VarChar(255)
  description String?              @db.Text
  metadata    Json?
  entityType  String?
  entityId    String?              @db.Char(36)
  projectId   String?              @db.Char(36)
  userId      String               @db.Char(36)
  createdAt   DateTime             @default(now())
  requestId   String?              @db.VarChar(64)
  severity    systemevent_severity @default(INFO)
  project     project?             @relation(fields: [projectId], references: [id], map: "SystemEvent_projectId_fkey")
  user        user                 @relation(fields: [userId], references: [id], map: "SystemEvent_userId_fkey")

  @@index([category], map: "SystemEvent_category_idx")
  @@index([createdAt], map: "SystemEvent_createdAt_idx")
  @@index([entityType], map: "SystemEvent_entityType_idx")
  @@index([eventType], map: "SystemEvent_eventType_idx")
  @@index([projectId], map: "SystemEvent_projectId_idx")
  @@index([userId], map: "SystemEvent_userId_idx")
}

model task {
  id                            String              @id @db.Char(36)
  title                         String
  description                   String?             @db.Text
  assignedToId                  String?             @db.Char(36)
  createdById                   String              @db.Char(36)
  dueDate                       DateTime?
  priority                      String              @default("Medium")
  status                        String              @default("Pending")
  projectId                     String?             @db.Char(36)
  createdAt                     DateTime            @default(now())
  updatedAt                     DateTime
  buildingId                    String?             @db.Char(36)
  departmentId                  String?             @db.Char(36)
  taskInputDate                 DateTime?
  backlogItemId                 String?             @db.Char(36)
  isPrivate                     Boolean             @default(false)
  completedAt                   DateTime?
  completedById                 String?             @db.Char(36)
  isCeoTask                     Boolean             @default(false)
  user_task_assignedToIdTouser  user?               @relation("task_assignedToIdTouser", fields: [assignedToId], references: [id], map: "Task_assignedToId_fkey")
  productbacklogitem            productbacklogitem? @relation(fields: [backlogItemId], references: [id], map: "Task_backlogItemId_fkey")
  building                      building?           @relation(fields: [buildingId], references: [id], map: "Task_buildingId_fkey")
  user_task_completedByIdTouser user?               @relation("task_completedByIdTouser", fields: [completedById], references: [id], map: "Task_completedById_fkey")
  user_task_createdByIdTouser   user                @relation("task_createdByIdTouser", fields: [createdById], references: [id], map: "Task_createdById_fkey")
  department                    department?         @relation(fields: [departmentId], references: [id], map: "Task_departmentId_fkey")
  project                       project?            @relation(fields: [projectId], references: [id], map: "Task_projectId_fkey")
  taskauditlog                  taskauditlog[]

  @@index([assignedToId], map: "Task_assignedToId_fkey")
  @@index([backlogItemId], map: "Task_backlogItemId_fkey")
  @@index([buildingId], map: "Task_buildingId_fkey")
  @@index([completedById], map: "Task_completedById_fkey")
  @@index([createdById], map: "Task_createdById_fkey")
  @@index([departmentId], map: "Task_departmentId_fkey")
  @@index([projectId], map: "Task_projectId_fkey")
}

model taskauditlog {
  id        String   @id @db.Char(36)
  taskId    String   @db.Char(36)
  userId    String   @db.Char(36)
  action    String
  field     String?
  oldValue  String?  @db.Text
  newValue  String?  @db.Text
  createdAt DateTime @default(now())
  task      task     @relation(fields: [taskId], references: [id], onDelete: Cascade, map: "TaskAuditLog_taskId_fkey")
  user      user     @relation(fields: [userId], references: [id], map: "TaskAuditLog_userId_fkey")

  @@index([createdAt], map: "TaskAuditLog_createdAt_idx")
  @@index([taskId], map: "TaskAuditLog_taskId_idx")
  @@index([userId], map: "TaskAuditLog_userId_idx")
}

model user {
  id                                                      String                     @id @db.Char(36)
  name                                                    String
  email                                                   String                     @unique(map: "User_email_key")
  password                                                String
  status                                                  String                     @default("active")
  roleId                                                  String                     @db.Char(36)
  departmentId                                            String?                    @db.Char(36)
  createdAt                                               DateTime                   @default(now())
  updatedAt                                               DateTime
  reportsToId                                             String?                    @db.Char(36)
  position                                                String?
  customPermissions                                       Json?
  aiInteractions                                          AIInteraction[]            @relation("UserAIInteractions")
  ownedAnnualInitiatives                                  AnnualInitiative[]         @relation("AnnualInitiativeOwner")
  assemblypart_assemblypart_createdByIdTouser             assemblypart[]             @relation("assemblypart_createdByIdTouser")
  assemblypart_assemblypart_deletedByIdTouser             assemblypart[]             @relation("assemblypart_deletedByIdTouser")
  assemblypart_assemblypart_updatedByIdTouser             assemblypart[]             @relation("assemblypart_updatedByIdTouser")
  auditlog                                                auditlog[]
  ownedBSCKPIs                                            BalancedScorecardKPI[]     @relation("BSCKPIOwner")
  bscKPIMeasurements                                      BSCKPIMeasurement[]        @relation("BSCKPIMeasurementRecorder")
  building                                                building[]
  ownedObjectives                                         CompanyObjective[]         @relation("ObjectiveOwner")
  department_department_managerIdTouser                   department?                @relation("department_managerIdTouser")
  ownedDeptInitiatives                                    DepartmentInitiative[]     @relation("DeptInitiativeOwner")
  deptKPIMeasurements                                     DepartmentKPIMeasurement[] @relation("DeptKPIMeasurementRecorder")
  ownedDeptKPIs                                           DepartmentKPI[]            @relation("DeptKPIOwner")
  ownedDeptObjectives                                     DepartmentObjective[]      @relation("DeptObjectiveOwner")
  dimensionalinspection                                   dimensionalinspection[]
  document_document_approvedByIdTouser                    document[]                 @relation("document_approvedByIdTouser")
  document_document_uploadedByIdTouser                    document[]                 @relation("document_uploadedByIdTouser")
  documentrevision_documentrevision_handledByTouser       documentrevision[]         @relation("documentrevision_handledByTouser")
  documentrevision_documentrevision_submittedByTouser     documentrevision[]         @relation("documentrevision_submittedByTouser")
  documentsubmission_documentsubmission_handledByTouser   documentsubmission[]       @relation("documentsubmission_handledByTouser")
  documentsubmission_documentsubmission_submittedByTouser documentsubmission[]       @relation("documentsubmission_submittedByTouser")
  entityversion                                           entityversion[]
  initiative_initiative_createdByTouser                   initiative[]               @relation("initiative_createdByTouser")
  initiative_initiative_ownerIdTouser                     initiative[]               @relation("initiative_ownerIdTouser")
  initiative_initiative_updatedByTouser                   initiative[]               @relation("initiative_updatedByTouser")
  initiativemilestone                                     initiativemilestone[]
  initiativetask                                          initiativetask[]
  itp_itp_approvedByIdTouser                              itp[]                      @relation("itp_approvedByIdTouser")
  itp_itp_createdByIdTouser                               itp[]                      @relation("itp_createdByIdTouser")
  itpactivity_itpactivity_signAIdTouser                   itpactivity[]              @relation("itpactivity_signAIdTouser")
  itpactivity_itpactivity_signBIdTouser                   itpactivity[]              @relation("itpactivity_signBIdTouser")
  itpactivity_itpactivity_signCIdTouser                   itpactivity[]              @relation("itpactivity_signCIdTouser")
  keyResultProgress                                       KeyResultProgress[]        @relation("KeyResultProgressRecorder")
  knowledgeapplication                                    knowledgeapplication[]
  knowledgeentry_knowledgeentry_ownerIdTouser             knowledgeentry[]           @relation("knowledgeentry_ownerIdTouser")
  knowledgeentry_knowledgeentry_reportedByIdTouser        knowledgeentry[]           @relation("knowledgeentry_reportedByIdTouser")
  knowledgeentry_knowledgeentry_validatedByIdTouser       knowledgeentry[]           @relation("knowledgeentry_validatedByIdTouser")
  kpialert                                                kpialert[]
  kpidefinition_kpidefinition_createdByIdTouser           kpidefinition[]            @relation("kpidefinition_createdByIdTouser")
  kpidefinition_kpidefinition_updatedByIdTouser           kpidefinition[]            @relation("kpidefinition_updatedByIdTouser")
  kpihistory                                              kpihistory[]
  kpimanualentry_kpimanualentry_approvedByTouser          kpimanualentry[]           @relation("kpimanualentry_approvedByTouser")
  kpimanualentry_kpimanualentry_createdByIdTouser         kpimanualentry[]           @relation("kpimanualentry_createdByIdTouser")
  kpimanualentry_kpimanualentry_userIdTouser              kpimanualentry[]           @relation("kpimanualentry_userIdTouser")
  materialinspection                                      materialinspection[]
  ncrreport_ncrreport_assignedToIdTouser                  ncrreport[]                @relation("ncrreport_assignedToIdTouser")
  ncrreport_ncrreport_closedByIdTouser                    ncrreport[]                @relation("ncrreport_closedByIdTouser")
  ncrreport_ncrreport_raisedByIdTouser                    ncrreport[]                @relation("ncrreport_raisedByIdTouser")
  ndtinspection                                           ndtinspection[]
  notifications                                           Notification[]             @relation("UserNotifications")
  passwordresettoken                                      passwordresettoken[]
  productbacklogitem                                      productbacklogitem[]
  productionlog                                           productionlog[]
  project_project_deletedByIdTouser                       project[]                  @relation("project_deletedByIdTouser")
  project_project_projectManagerIdTouser                  project[]                  @relation("project_projectManagerIdTouser")
  project_project_salesEngineerIdTouser                   project[]                  @relation("project_salesEngineerIdTouser")
  projectassignment                                       projectassignment[]
  projectplan_projectplan_createdByIdTouser               projectplan[]              @relation("projectplan_createdByIdTouser")
  projectplan_projectplan_updatedByIdTouser               projectplan[]              @relation("projectplan_updatedByIdTouser")
  ptssyncbatch_ptssyncbatch_rolledBackByIdTouser          ptssyncbatch[]             @relation("ptssyncbatch_rolledBackByIdTouser")
  ptssyncbatch_ptssyncbatch_userIdTouser                  ptssyncbatch[]             @relation("ptssyncbatch_userIdTouser")
  rfirequest_rfirequest_assignedToIdTouser                rfirequest[]               @relation("rfirequest_assignedToIdTouser")
  rfirequest_rfirequest_requestedByIdTouser               rfirequest[]               @relation("rfirequest_requestedByIdTouser")
  systemevent                                             systemevent[]
  task_task_assignedToIdTouser                            task[]                     @relation("task_assignedToIdTouser")
  task_task_completedByIdTouser                           task[]                     @relation("task_completedByIdTouser")
  task_task_createdByIdTouser                             task[]                     @relation("task_createdByIdTouser")
  taskauditlog                                            taskauditlog[]
  department_user_departmentIdTodepartment                department?                @relation("user_departmentIdTodepartment", fields: [departmentId], references: [id], map: "User_departmentId_fkey")
  user                                                    user?                      @relation("userTouser", fields: [reportsToId], references: [id], map: "User_reportsToId_fkey")
  other_user                                              user[]                     @relation("userTouser")
  role                                                    role                       @relation(fields: [roleId], references: [id], map: "User_roleId_fkey")
  dashboardWidgets                                        UserDashboardWidget[]      @relation("UserDashboardWidgets")
  assignedWeeklyIssues                                    WeeklyIssue[]              @relation("WeeklyIssueAssignedTo")
  raisedWeeklyIssues                                      WeeklyIssue[]              @relation("WeeklyIssueRaisedBy")
  weldinginspection                                       weldinginspection[]
  ownedWorkUnits                                          WorkUnit[]                 @relation("WorkUnitOwner")
  workorder_workorder_createdByIdTouser                   workorder[]                @relation("workorder_createdByIdTouser")
  workorder_workorder_productionEngineerIdTouser          workorder[]                @relation("workorder_productionEngineerIdTouser")
  wps_wps_approvedByIdTouser                              wps[]                      @relation("wps_approvedByIdTouser")
  wps_wps_preparedByIdTouser                              wps[]                      @relation("wps_preparedByIdTouser")

  @@index([departmentId], map: "User_departmentId_fkey")
  @@index([reportsToId], map: "User_reportsToId_fkey")
  @@index([roleId], map: "User_roleId_fkey")
}

model weldinginspection {
  id                String        @id @db.Char(36)
  inspectionNumber  String        @unique(map: "WeldingInspection_inspectionNumber_key")
  projectId         String        @db.Char(36)
  buildingId        String?       @db.Char(36)
  productionLogId   String        @db.Char(36)
  wpsNumber         String?
  welderCode        String?
  jointType         String
  jointLocation     String
  weldingProcess    String
  inspectorId       String        @db.Char(36)
  inspectionDate    DateTime      @default(now())
  visualResult      String        @default("Pending")
  defects           String?       @db.Text
  defectDescription String?       @db.Text
  repairRequired    Boolean       @default(false)
  repairCompleted   Boolean       @default(false)
  result            String        @default("Pending")
  remarks           String?       @db.Text
  attachments       String?       @db.Text
  createdAt         DateTime      @default(now())
  updatedAt         DateTime
  building          building?     @relation(fields: [buildingId], references: [id], map: "WeldingInspection_buildingId_fkey")
  user              user          @relation(fields: [inspectorId], references: [id], map: "WeldingInspection_inspectorId_fkey")
  productionlog     productionlog @relation(fields: [productionLogId], references: [id], onDelete: Cascade, map: "WeldingInspection_productionLogId_fkey")
  project           project       @relation(fields: [projectId], references: [id], onDelete: Cascade, map: "WeldingInspection_projectId_fkey")

  @@index([buildingId], map: "WeldingInspection_buildingId_idx")
  @@index([inspectionDate], map: "WeldingInspection_inspectionDate_idx")
  @@index([inspectorId], map: "WeldingInspection_inspectorId_idx")
  @@index([productionLogId], map: "WeldingInspection_productionLogId_idx")
  @@index([projectId], map: "WeldingInspection_projectId_idx")
  @@index([result], map: "WeldingInspection_result_idx")
}

model workorder {
  id                                        String          @id @db.Char(36)
  workOrderNumber                           String          @unique(map: "WorkOrder_workOrderNumber_key")
  projectId                                 String          @db.Char(36)
  buildingId                                String          @db.Char(36)
  name                                      String
  description                               String?         @db.Text
  selectedGroups                            Json
  productionEngineerId                      String          @db.Char(36)
  processingLocation                        String?
  processingTeam                            String?
  totalWeight                               Decimal         @db.Decimal(10, 2)
  weightPercentage                          Decimal         @db.Decimal(5, 2)
  plannedStartDate                          DateTime
  plannedEndDate                            DateTime
  actualStartDate                           DateTime?
  actualEndDate                             DateTime?
  status                                    String          @default("Pending")
  progress                                  Decimal         @default(0.00) @db.Decimal(5, 2)
  createdById                               String          @db.Char(36)
  createdAt                                 DateTime        @default(now())
  updatedAt                                 DateTime
  building                                  building        @relation(fields: [buildingId], references: [id], onDelete: Cascade, map: "WorkOrder_buildingId_fkey")
  user_workorder_createdByIdTouser          user            @relation("workorder_createdByIdTouser", fields: [createdById], references: [id], map: "WorkOrder_createdById_fkey")
  user_workorder_productionEngineerIdTouser user            @relation("workorder_productionEngineerIdTouser", fields: [productionEngineerId], references: [id], map: "WorkOrder_productionEngineerId_fkey")
  project                                   project         @relation(fields: [projectId], references: [id], onDelete: Cascade, map: "WorkOrder_projectId_fkey")
  workorderpart                             workorderpart[]

  @@index([buildingId], map: "WorkOrder_buildingId_idx")
  @@index([createdById], map: "WorkOrder_createdById_fkey")
  @@index([plannedEndDate], map: "WorkOrder_plannedEndDate_idx")
  @@index([plannedStartDate], map: "WorkOrder_plannedStartDate_idx")
  @@index([productionEngineerId], map: "WorkOrder_productionEngineerId_idx")
  @@index([projectId], map: "WorkOrder_projectId_idx")
  @@index([status], map: "WorkOrder_status_idx")
}

model workorderpart {
  id                String       @id @db.Char(36)
  workOrderId       String       @db.Char(36)
  assemblyPartId    String       @db.Char(36)
  partDesignation   String
  assemblyMark      String
  partMark          String
  quantity          Int
  weight            Decimal      @db.Decimal(10, 2)
  processedQuantity Int          @default(0)
  status            String       @default("Pending")
  createdAt         DateTime     @default(now())
  updatedAt         DateTime
  assemblypart      assemblypart @relation(fields: [assemblyPartId], references: [id], onDelete: Cascade, map: "WorkOrderPart_assemblyPartId_fkey")
  workorder         workorder    @relation(fields: [workOrderId], references: [id], onDelete: Cascade, map: "WorkOrderPart_workOrderId_fkey")

  @@unique([workOrderId, assemblyPartId], map: "WorkOrderPart_workOrderId_assemblyPartId_key")
  @@index([assemblyPartId], map: "WorkOrderPart_assemblyPartId_idx")
  @@index([status], map: "WorkOrderPart_status_idx")
  @@index([workOrderId], map: "WorkOrderPart_workOrderId_idx")
}

model wps {
  id                          String    @id @db.Char(36)
  wpsNumber                   String    @unique(map: "WPS_wpsNumber_key")
  revision                    Int       @default(0)
  projectId                   String    @db.Char(36)
  type                        String    @default("CUSTOM")
  weldingProcess              String
  supportingPQR               String?
  dateIssued                  DateTime?
  preparedById                String    @db.Char(36)
  approvedById                String?   @db.Char(36)
  clientApprovedBy            String?
  baseMaterial                String?
  thicknessGroove             Decimal?  @db.Decimal(10, 2)
  thicknessFillet             Decimal?  @db.Decimal(10, 2)
  diameter                    Decimal?  @db.Decimal(10, 2)
  fillerMetalSpec             String?
  fillerClass                 String?
  shieldingGas                String?
  flowRate                    Decimal?  @db.Decimal(10, 2)
  currentType                 String?
  preheatTempMin              Int?
  interpassTempMin            Int?
  interpassTempMax            Int?
  postWeldTemp                Int?
  position                    String?
  jointType                   String?
  grooveAngle                 Int?
  rootOpening                 Decimal?  @db.Decimal(10, 2)
  backingType                 String?
  remarks                     String?   @db.Text
  status                      String    @default("Draft")
  pdfAttachment               String?
  createdAt                   DateTime  @default(now())
  updatedAt                   DateTime
  backingType2                String?
  backingUsed                 String?
  baseMetalFillet             String?
  baseMetalGroove             String?
  jointDiagram                String?
  materialGroup               String?
  materialSpec                String?
  materialThickness           Decimal?  @db.Decimal(10, 2)
  thicknessRange              String?
  user_wps_approvedByIdTouser user?     @relation("wps_approvedByIdTouser", fields: [approvedById], references: [id], map: "WPS_approvedById_fkey")
  user_wps_preparedByIdTouser user      @relation("wps_preparedByIdTouser", fields: [preparedById], references: [id], map: "WPS_preparedById_fkey")
  project                     project   @relation(fields: [projectId], references: [id], onDelete: Cascade, map: "WPS_projectId_fkey")
  wpspass                     wpspass[]

  @@index([approvedById], map: "WPS_approvedById_fkey")
  @@index([preparedById], map: "WPS_preparedById_fkey")
  @@index([projectId], map: "WPS_projectId_idx")
  @@index([status], map: "WPS_status_idx")
  @@index([wpsNumber], map: "WPS_wpsNumber_idx")
}

model wpspass {
  id             String   @id @db.Char(36)
  wpsId          String   @db.Char(36)
  layerNo        Int
  process        String
  electrodeClass String?
  diameter       Decimal? @db.Decimal(10, 3)
  polarity       String?
  amperage       Int?
  voltage        Int?
  travelSpeed    Decimal? @db.Decimal(10, 2)
  heatInput      Decimal? @db.Decimal(10, 2)
  createdAt      DateTime @default(now())
  updatedAt      DateTime
  wps            wps      @relation(fields: [wpsId], references: [id], onDelete: Cascade, map: "WPSPass_wpsId_fkey")

  @@index([layerNo], map: "WPSPass_layerNo_idx")
  @@index([wpsId], map: "WPSPass_wpsId_idx")
}

enum NotificationType {
  TASK_ASSIGNED
  APPROVAL_REQUIRED
  DEADLINE_WARNING
  APPROVED
  REJECTED
  SYSTEM
}

enum WorkUnitType {
  DESIGN
  PROCUREMENT
  PRODUCTION
  QC
  DOCUMENTATION
}

enum WorkUnitStatus {
  NOT_STARTED
  IN_PROGRESS
  BLOCKED
  COMPLETED
}

enum DependencyType {
  FS
  SS
  FF
}

enum ResourceType {
  DESIGNER
  LASER
  WELDER
  QC
  PROCUREMENT
}

enum CapacityUnit {
  HOURS
  TONS
  DRAWINGS
}

enum RiskSeverity {
  LOW
  MEDIUM
  HIGH
  CRITICAL
}

enum RiskType {
  DELAY
  BOTTLENECK
  DEPENDENCY
  OVERLOAD
}

enum knowledgeentry_type {
  CHALLENGE
  ISSUE
  LESSON
  BEST_PRACTICE
}

enum riskpattern_process {
  Design
  Detailing
  Procurement
  Production
  QC
  Erection
}

enum auditlog_action {
  CREATE
  UPDATE
  DELETE
  RESTORE
  APPROVE
  REJECT
  SYNC
}

enum productbacklogitem_type {
  FEATURE
  BUG
  TECH_DEBT
  PERFORMANCE
  REPORTING
  REFACTOR
  COMPLIANCE
  INSIGHT
}

enum productbacklogitem_category {
  CORE_SYSTEM
  PRODUCTION
  DESIGN
  DETAILING
  PROCUREMENT
  QC
  LOGISTICS
  FINANCE
  REPORTING
  AI
  GOVERNANCE
}

enum riskpattern_status {
  Observed
  Escalated
  Addressed
}

enum knowledgeentry_severity {
  Low
  Medium
  High
  Critical
}

enum knowledgeentry_status {
  Open
  InProgress
  PendingValidation
  Validated
  Archived
}

enum productbacklogitem_priority {
  CRITICAL
  HIGH
  MEDIUM
  LOW
}

enum knowledgeentry_process {
  Design
  Detailing
  Procurement
  Production
  QC
  Erection
}

enum productbacklogitem_status {
  IDEA
  UNDER_REVIEW
  APPROVED
  PLANNED
  IN_PROGRESS
  BLOCKED
  COMPLETED
  DROPPED
}

enum productbacklogitem_riskLevel {
  LOW
  MEDIUM
  HIGH
}

enum systemevent_severity {
  INFO
  WARNING
  ERROR
  CRITICAL
}
